<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profiles &mdash; документация SERP-PYTHON 0.1.2</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=fc756e9b"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=29b1f277"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Spaces" href="spaces.html" />
    <link rel="prev" title="Origins" href="origins.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo_w.png" class="logo" alt="Логотип"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Авторизация</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Базовые принципы</a></li>
<li class="toctree-l1"><a class="reference internal" href="entries.html">Записи</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups.html">Person Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="origins.html">Origins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokens.html">Tokens</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SERP-PYTHON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Profiles</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/profiles.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="profiles">
<h1>Profiles<a class="headerlink" href="#profiles" title="Link to this heading"></a></h1>
<section id="basic-concepts">
<h2>Basic concepts<a class="headerlink" href="#basic-concepts" title="Link to this heading"></a></h2>
<p>Profiles are wrapped face embeddings that come through user uploads or
automatically from connected cameras. In fact, this is the similar “tag”
as sources, but if the sources indicate where the photo came from, then
the profile is a tag indicating who is on it.</p>
<p>Entry types that are always associated with persons: new, reinit, exact,
ha, junk. The types of records nf, nm, det cannot be associated with
persons, since in this case the platform does not know who is in the
photo.</p>
<p>Any work with profiles implies the automatic scope of the token with
which the request is made. When created, upon reinit, Entries and
Profiles fall into the same space where the origin specified in the
request is located (again, provided that this origin is visible from the
current token space).</p>
</section>
<section id="create-profile">
<h2>Create Profile<a class="headerlink" href="#create-profile" title="Link to this heading"></a></h2>
<p><strong>Authorized Client() required.</strong></p>
<p>This method creates (or finds, to avoid duplicates) person using
provided photo.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">serp</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_token</span><span class="o">=</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">image</span><span class="o">=</span><span class="n">f</span><span class="p">,</span>
        <span class="n">origin_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="re-init-profile-from-provided-photo">
<h2>Re-init Profile from provided photo<a class="headerlink" href="#re-init-profile-from-provided-photo" title="Link to this heading"></a></h2>
<p><strong>Authorized Client() required.</strong></p>
<p>This method changes face embedding for a specified persons to the one,
extracted from provided photo.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">serp</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_token</span><span class="o">=</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">reinit_by_photo</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;abcdef01-abcd-abcd01-abcdef01&quot;</span><span class="p">,</span>
        <span class="n">image</span><span class="o">=</span><span class="n">f</span>
    <span class="p">)</span>
    <span class="c1"># NOTE: There is empty response in case of successful operation</span>
</pre></div>
</div>
</section>
<section id="search-profile-by-provided-photo">
<h2>Search Profile by provided photo<a class="headerlink" href="#search-profile-by-provided-photo" title="Link to this heading"></a></h2>
<p><strong>Authorized Client() required.</strong></p>
<p>This method searches for a profile in database, comparing face embedding
from provided photo.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">serp</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_token</span><span class="o">=</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">identify_asm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="delete-profile-by-pid">
<h2>Delete Profile by PID<a class="headerlink" href="#delete-profile-by-pid" title="Link to this heading"></a></h2>
<p><strong>Authorized Client() required.</strong></p>
<p>This method deletes profile, if found by its id.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">serp</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">api_token</span><span class="o">=</span><span class="s2">&quot;abcd&quot;</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;abcdef01-abcd-abcd01-abcdef01&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">204</span><span class="p">:</span>
    <span class="c1"># NOTE: There is empty response in case of successful operation</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Profile deleted successfully.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="origins.html" class="btn btn-neutral float-left" title="Origins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="spaces.html" class="btn btn-neutral float-right" title="Spaces" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Авторские права 2023, SERP. </p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>